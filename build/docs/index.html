<!doctype html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <title>fetch-swarm 1.0.0 | Documentation</title>
  <meta name='description' content='A no-dependency wrapper to global fetch that adds concurrency and significant performance gains. This library is tuned for hitting a server many times and is dead-simple to use.'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet'>
  <link href='assets/style.css' rel='stylesheet'>
  <link href='assets/github.css' rel='stylesheet'>
  <link href='assets/split.css' rel='stylesheet'>
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>fetch-swarm</h3>
          <div class='mb1'><code>1.0.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            spellcheck='false'
            autocapitalize='off'
            autocorrect='off'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#connection'
                  class=" toggle-sibling">
                  Connection
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  <ul class='list-reset py1-ul pl1'>
                    <li class='h5'><span>Static members</span></li>
                    
                      <li><a
                        href='#connectioncreate'
                        class='regular pre-open'>
                        .create
                      </a></li>
                    
                    </ul>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#connectionone'
                        class='regular pre-open'>
                        #one
                      </a></li>
                      
                      <li><a
                        href='#connectionswarm'
                        class='regular pre-open'>
                        #swarm
                      </a></li>
                      
                      <li><a
                        href='#connectionstop'
                        class='regular pre-open'>
                        #stop
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#result'
                  class="">
                  Result
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='connection'>
      Connection
    </h3>
    
    
  </div>
  

  <p>Typically you create one connection for each server you're hitting. This object maintains session information, connection pools, fetch priorities, etc.</p>

  
  

  
  
  
  
  
  

  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Static Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='connectioncreate'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>async create(options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Create a new connection.</p>

    <div class='pre p1 fill-light mt0'>async create(options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="#connection">Connection</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.concurrency</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>2</code>)
  </td>
  <td class='break-word'><span>The maximum number of concurrent fetches
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.minMsBetweenRequests</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>150</code>)
  </td>
  <td class='break-word'><span>Every fetch is guaranteed to be separated by at least this many milliseconds (counting from start to start)
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.timeoutMs</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Stop and fail a fetch if it has not completed after this many milliseconds; timed-out fetched may be retried depending on the other options (0 means no timeout)
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.retry</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Retry failed fetches this many times before throwing an error; note that (per spec) HTTP failures such as 4xx or 5xx 
<em>do not</em>
 count as failed fetches
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  


  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='connectionone'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>async one(request)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Executes a single fetch and returns the result.</p>

    <div class='pre p1 fill-light mt0'>async one(request: resource): <a href="#result">Result</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>request</span> <code class='quiet'>(resource)</code>
	    The resource you wish to fetch; this can be a string, object with a stringifier, 
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URL">URL object</a>
, or 
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Request object</a>
.

          </div>
          
        </div>
      
    </div>
  

  



  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='connectionswarm'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>async *swarm(requests, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Execute each request asynchronously.</p>
<p>Subsequent calls to <a href="#connectionswarm">swarm()</a> or <a href="#connectionone">one()</a> on the same Connection will be prioritized over earlier calls. This is generally aligned with how fetches are processed (one fetch is inspected, which leads to more fetches whose responses are inspected… etc.)</p>
<p><strong>Hot tip:</strong> since results are not necessarily in the same order as the requests, it is often a good idea to add identifiers right on the request objects for easier processing in the loop, without requiring complicated mapping.</p>
<p>This function will try hard to finish all fetches, use <a href="#connectionstop">stop()</a> to cancel any pending fetches and/or kill executing fetches.</p>

    <div class='pre p1 fill-light mt0'>async *swarm(requests: iterable, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol">Iterator</a>&lt;<a href="#result">Result</a>&gt;</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>requests</span> <code class='quiet'>(iterable)</code>
	    Any 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol">iterable</a>
 of requests; each one can be a string, object with a stringifier, 
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URL">URL object</a>
, or 
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Request object</a>
.

          </div>
          
        </div>
      
        <div class='space-bottom0'>

          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.ordered</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code>
  
    (default <code>false</code>)
  </td>
  <td class='break-word'><span>Whether the responses are guaranteed to be in the same order as the requests
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='connectionstop'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>async stop(options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Stop the execution of requests early.</p>
<p><strong>Hot tip:</strong> Killing executing fetches guarantees that there will be no more activity once this method call resolves, but it is undeterminable whether any of the killed fetches succeeded, failed, or had any server side-effects.</p>

    <div class='pre p1 fill-light mt0'>async stop(options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.killExecuting</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code>
  
    (default <code>true</code>)
  </td>
  <td class='break-word'><span>In addition to canceling pending fetches, also kill any currently-executing fetches so that the response will not be returned.
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='result'>
      Result
    </h3>
    
    
  </div>
  


  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>request</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          : the object given to fetch (feel free to attach your own data here to make it easier to map on response)

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>response</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          : the object responded by fetch

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
